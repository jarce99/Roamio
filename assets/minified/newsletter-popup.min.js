customElements.get("newsletter-modal")||customElements.define("newsletter-modal",class extends ModalElement{constructor(){super(),"/challenge"!==window.location.pathname&&theme.cookiesEnabled&&(!theme.config.isTouch||Shopify.designMode?this.init():new theme.initWhenVisible(theme.utils.throttle(this.init.bind(this))))}get shouldLock(){return!0}get testMode(){return"true"===this.getAttribute("data-test-mode")}get delay(){return this.hasAttribute("data-delay")?parseInt(this.getAttribute("data-delay")):5}get expiry(){return this.hasAttribute("data-expiry")?parseInt(this.getAttribute("data-expiry")):30}get cookieName(){return"concept:newsletter-popup"}get submited(){return null!==this.querySelector(".alert")}init(){this.initialized||(this.initialized=!0,this.submited?this.load(1):!this.testMode&&this.getCookie(this.cookieName)||this.load(this.delay))}load(e){Shopify.designMode||setTimeout(()=>this.show(),1e3*e)}afterShow(){super.afterShow(),this.classList.add("show-image")}afterHide(){super.afterHide(),this.classList.remove("show-image"),this.testMode?this.removeCookie(this.cookieName):this.setCookie(this.cookieName,this.expiry)}getCookie(e){e=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return e?e[2]:null}setCookie(e,t){document.cookie=e+`=true; max-age=${24*t*60*60}; path=/`}removeCookie(e){document.cookie=e+"=; max-age=0"}});