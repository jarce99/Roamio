customElements.get("remove-gift-wrap")||customElements.define("remove-gift-wrap",class extends HTMLAnchorElement{constructor(){super(),this.addEventListener("click",t=>{t.preventDefault(),this.closest("cart-items").enableLoading(this.getAttribute("data-index")),document.querySelector("gift-wrapping").removeGiftWrap()})}},{extends:"a"}),customElements.get("gift-wrapping")||customElements.define("gift-wrapping",class extends HTMLElement{constructor(){super(),this.giftWrapId=this.getAttribute("data-gift-wrap-id"),this.giftWrapping=this.getAttribute("data-gift-wrapping"),this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart"))}connectedCallback(){return this.querySelector('[name="attributes[gift-wrapping]"]').addEventListener("change",theme.utils.debounce(t=>{t.target.checked?this.setGiftWrap():this.removeGiftWrap()},300)),1==this.cartItemsSize&&0<this.giftWrapsInCart?this.removeGiftWrap():0<this.giftWrapsInCart&this.giftWrapsInCart!=this.itemsInCart||0<this.giftWrapsInCart&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&0<this.giftWrapping.length?this.setGiftWrap():void 0}setGiftWrap(){this.enableLoading();var t=[],t=(document.documentElement.dispatchEvent(new CustomEvent("cart:bundled-sections",{bubbles:!0,detail:{sections:t}})),JSON.stringify({updates:{[this.giftWrapId]:this.itemsInCart},attributes:{"gift-wrapping":!0},sections:t}));this.fetchGiftWrap(t)}removeGiftWrap(){this.enableLoading();var t=[],t=(document.documentElement.dispatchEvent(new CustomEvent("cart:bundled-sections",{bubbles:!0,detail:{sections:t}})),JSON.stringify({updates:{[this.giftWrapId]:0},attributes:{"gift-wrapping":"","gift-note":""},sections:t}));this.fetchGiftWrap(t)}fetchGiftWrap(t){fetch(""+theme.routes.cart_update_url,{...theme.utils.fetchConfig(),body:t}).then(t=>t.json()).then(t=>{theme.pubsub.publish(theme.pubsub.PUB_SUB_EVENTS.cartUpdate,{source:"gift-wrapping",cart:t})}).catch(t=>{console.log(t)})}enableLoading(){var t=this.querySelector(".loader");t&&(t.hidden=!1)}}),customElements.get("gift-note")||customElements.define("gift-note",class extends HTMLElement{constructor(){super(),this.addEventListener("change",theme.utils.debounce(t=>{t=JSON.stringify({attributes:{"gift-note":t.target.value}});fetch(""+theme.routes.cart_update_url,{...theme.utils.fetchConfig(),body:t})},300))}});