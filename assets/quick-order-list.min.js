customElements.get("quick-order-list-container")||customElements.define("quick-order-list-container",class extends HTMLElement{constructor(){super(),document.addEventListener("cart:bundled-sections",this.onPrepareBundledSections.bind(this))}get sectionId(){return this.getAttribute("data-section-id")}onPrepareBundledSections(t){t.detail.sections.push(this.sectionId)}}),customElements.get("quick-order-list-remove-button")||customElements.define("quick-order-list-remove-button",class extends HTMLAnchorElement{constructor(){super(),this.addEventListener("click",this.onButtonClick)}get quickOrderList(){return this.closest('form[is="quick-order-list"]')}onButtonClick(t){t.preventDefault(),this.quickOrderList.updateQuantity(this.getAttribute("data-index"),0)}},{extends:"a"}),customElements.get("quick-order-list-remove-all-button")||customElements.define("quick-order-list-remove-all-button",class extends HTMLElement{constructor(){super(),this.actions={confirm:"confirm",remove:"remove",cancel:"cancel"},this.addEventListener("click",this.onButtonClick)}get quickOrderList(){return this.closest('form[is="quick-order-list"]')}get allVariants(){return this.quickOrderList.querySelectorAll("[data-quantity-variant-id]")}get items(){let e={};return this.allVariants.forEach(t=>{0<parseInt(t.getAttribute("data-cart-quantity"))&&(this.hasVariantsInCart=!0,e[parseInt(t.getAttribute("data-quantity-variant-id"))]=0)}),e}onButtonClick(t){t.preventDefault(),this.getAttribute("data-action")===this.actions.confirm?this.toggleConfirmation(!1,!0):this.getAttribute("data-action")===this.actions.remove?(this.quickOrderList.updateMultipleQty(this.items),this.toggleConfirmation(!0,!1)):this.getAttribute("data-action")===this.actions.cancel&&this.toggleConfirmation(!0,!1)}toggleConfirmation(t,e){this.quickOrderList.querySelector(".quick-order-list-total__confirmation").toggleAttribute("hidden",t),this.quickOrderList.querySelector(".quick-order-list-total__info").toggleAttribute("hidden",e)}}),customElements.get("quick-order-list")||customElements.define("quick-order-list",class extends HTMLFormElement{cartUpdateUnsubscriber=void 0;constructor(){super(),this.addEventListener("change",theme.utils.debounce(this.onChange.bind(this),300)),this.cartUpdateUnsubscriber=theme.pubsub.subscribe(theme.pubsub.PUB_SUB_EVENTS.cartUpdate,this.onCartUpdate.bind(this))}get sectionId(){return this.getAttribute("data-section-id")}get allVariants(){return this.querySelectorAll("[data-quantity-variant-id]")}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber()}onChange(t){var e=t.target,i=parseInt(e.value),r=e.getAttribute("data-index");0===i?this.updateQuantity(r,i,document.activeElement.getAttribute("name"),e):this.validateQuantity(t)}onCartUpdate(t){var e,i,r;t.cart.errors?this.onCartError(t.cart.errors,t.target):(r=(new DOMParser).parseFromString(t.cart.sections[this.sectionId],"text/html"),(e=document.querySelector("#MiniCart-"+this.sectionId))&&(i=r.querySelector("#MiniCart-"+this.sectionId))&&(e.innerHTML=i.innerHTML),(e=document.querySelector("#MainCart-"+this.sectionId))&&(i=r.querySelector("#MainCart-"+this.sectionId))&&(e.innerHTML=i.innerHTML),(r=document.getElementById(`VariantItem-${this.sectionId}-`+t.line))&&r.querySelector(`[name="${t.name}"]`)?theme.a11y.trapFocus(e,r.querySelector(`[name="${t.name}"]`)):theme.a11y.trapFocus(e,e.querySelector(".variant-item__title")),document.dispatchEvent(new CustomEvent("cart:updated",{detail:{cart:t.cart}})))}onCartError(t,e){e?(this.disableLoading(e.getAttribute("data-index")),this.setValidity(e,t)):(window.location.href=theme.routes.cart_url,alert(t))}updateQuantity(t,e,i,r){var s={};s[t]=e,this.updateMultipleQty(s,t,i,r)}updateMultipleQty(t,e,i,r){this.enableLoading(e),this.setErrorMessage();var s=[],t=(document.documentElement.dispatchEvent(new CustomEvent("cart:bundled-sections",{bubbles:!0,detail:{sections:s}})),JSON.stringify({updates:t,sections:s,sections_url:this.getAttribute("data-product-url")}));fetch(""+theme.routes.cart_update_url,{...theme.utils.fetchConfig(),body:t}).then(t=>t.json()).then(t=>{theme.pubsub.publish(theme.pubsub.PUB_SUB_EVENTS.cartUpdate,{source:"quick-order-list",cart:t,target:r,line:e,name:i})}).catch(t=>{"AbortError"===t.name?console.log("Fetch aborted by user"):(console.log(t),this.setErrorMessage(theme.cartStrings.error))})}enableLoading(t){document.querySelectorAll(`[id^="Loader-${this.sectionId}-${t}"]`).forEach(t=>t.hidden=!1);t=document.getElementById(`Loader-${this.sectionId}-all`);t&&(t.hidden=!1)}disableLoading(t){document.querySelectorAll(`[id^="Loader-${this.sectionId}-${t}"]`).forEach(t=>t.hidden=!0);t=document.getElementById(`Loader-${this.sectionId}-all`);t&&(t.hidden=!0)}setErrorMessage(t=null){var e=this.querySelector(".quick-order-list__error");t?(e.querySelector(".quick-order-list-error__message").innerText=t,e.removeAttribute("hidden")):e.setAttribute("hidden","")}setValidity(t,e){t.setCustomValidity(e),t.reportValidity(),t.value=t.defaultValue,t.select()}validateQuantity(t){var t=t.target,e=parseInt(t.value),i=t.getAttribute("data-index");let r="";e<parseInt(t.getAttribute("data-min"))?r=theme.quickOrderListStrings.minError.replace("[min]",t.getAttribute("data-min")):e>parseInt(t.max)?r=theme.quickOrderListStrings.maxError.replace("[max]",t.max):e%parseInt(t.step)!=0&&(r=theme.quickOrderListStrings.stepError.replace("[step]",t.step)),r?this.setValidity(t,r):(t.setCustomValidity(""),t.reportValidity(),this.updateQuantity(i,e,document.activeElement.getAttribute("name"),t))}},{extends:"form"});