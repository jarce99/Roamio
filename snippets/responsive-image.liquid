{%- comment -%}
  Responsive Image Snippet with SEO-friendly alt text
  - Ensures all images have descriptive alt text
  - Handles responsive image loading
  - Supports lazy loading
{%- endcomment -%}

{%- liquid
  assign img_url = image | img_url: '1x1' | replace: '_1x1.', '_{width}x.'
  assign img_alt = alt | default: image.alt | default: image.title | default: 'Product image'
  if img_alt == blank or img_alt == 'Product image'
    assign img_alt = shop.name | append: ' - ' | append: image.title | default: 'Product image'
  endif
-%}

<img
  class="{{ class_name }}"
  src="{{ image | img_url: '300x' }}"
  srcset="{% for width in '180,360,540,720,900,1080,1296,1512,1728,1944,2160,2376,2592,2808,3024' | split: ',' %}{{ image | img_url: width | append: 'x' }} {{ width }}w{% unless forloop.last %}, {% endunless %}{% endfor %}"
  sizes="{{ sizes | default: '100vw' }}"
  alt="{{ img_alt | escape }}"
  loading="{{ loading | default: 'lazy' }}"
  width="{{ image.width }}"
  height="{{ image.height }}"
  {% if draggable == false %}draggable="false"{% endif %}
> 